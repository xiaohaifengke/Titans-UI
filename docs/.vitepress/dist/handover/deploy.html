<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>智慧森防的部署信息 | Titans-UI</title>
    <meta name="description" content="Just playing around.">
    <link rel="stylesheet" href="/Titans-UI/assets/style.12e79ed1.css">
    <link rel="modulepreload" href="/Titans-UI/assets/Home.776d65be.js">
    <link rel="modulepreload" href="/Titans-UI/assets/AlgoliaSearchBox.19d68d24.js">
    <link rel="modulepreload" href="/Titans-UI/assets/app.5aaa6b63.js">
    <link rel="modulepreload" href="/Titans-UI/assets/handover_deploy.md.79b69ae7.lean.js">
    
    <meta name="twitter:title" content="智慧森防的部署信息 | Titans-UI">
  <meta property="og:title" content="智慧森防的部署信息 | Titans-UI">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-6428a8ee><div class="sidebar-button" data-v-6428a8ee><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/Titans-UI/" aria-label="Titans-UI, back to home" data-v-6428a8ee data-v-652004a9><!----> Titans-UI</a><div class="flex-grow" data-v-6428a8ee></div><div class="nav" data-v-6428a8ee><nav class="nav-links" data-v-6428a8ee data-v-03c8814d><!--[--><div class="item" data-v-03c8814d><div class="nav-link" data-v-03c8814d data-v-322ab26e><a class="item" href="/Titans-UI/guide/introduction" data-v-322ab26e>首页 <!----></a></div></div><div class="item" data-v-03c8814d><div class="nav-link" data-v-03c8814d data-v-322ab26e><a class="item" href="/Titans-UI/component/button" data-v-322ab26e>组件 <!----></a></div></div><div class="item" data-v-03c8814d><div class="nav-link" data-v-03c8814d data-v-322ab26e><a class="item isExternal" href="http://192.168.0.16/frontend/Titans-UI" target="_blank" rel="noopener noreferrer" data-v-322ab26e>GitLab <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-322ab26e><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-03c8814d><div class="nav-link" data-v-03c8814d data-v-322ab26e><a class="item" href="/Titans-UI/handover/ffp" data-v-322ab26e>交接文档 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-a9843200><nav class="nav-links nav" data-v-a9843200 data-v-03c8814d><!--[--><div class="item" data-v-03c8814d><div class="nav-link" data-v-03c8814d data-v-322ab26e><a class="item" href="/Titans-UI/guide/introduction" data-v-322ab26e>首页 <!----></a></div></div><div class="item" data-v-03c8814d><div class="nav-link" data-v-03c8814d data-v-322ab26e><a class="item" href="/Titans-UI/component/button" data-v-322ab26e>组件 <!----></a></div></div><div class="item" data-v-03c8814d><div class="nav-link" data-v-03c8814d data-v-322ab26e><a class="item isExternal" href="http://192.168.0.16/frontend/Titans-UI" target="_blank" rel="noopener noreferrer" data-v-322ab26e>GitLab <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-322ab26e><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-03c8814d><div class="nav-link" data-v-03c8814d data-v-322ab26e><a class="item" href="/Titans-UI/handover/ffp" data-v-322ab26e>交接文档 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-a9843200><!--[--><li class="sidebar-link"><p class="sidebar-link-item">智慧森防</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/Titans-UI/handover/ffp">介绍</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Titans-UI/handover/project-structure">项目结构</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/Titans-UI/handover/deploy">部署信息</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#开发环境服务器信息">开发环境服务器信息</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#开发环境docker信息">开发环境docker信息</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#nginx配置信息">nginx配置信息</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#黑龙江环境部署教程">黑龙江环境部署教程</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Titans-UI/handover/branch">分支管理规范</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Titans-UI/handover/git-commit">Git 提交规范</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Titans-UI/handover/gitlab">仓库地址</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">持续集成</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/Titans-UI/handover/devops">简介</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-cb2da010><div class="container" data-v-cb2da010><!--[--><!--]--><div style="position:relative;" class="content" data-v-cb2da010><div><h1 id="智慧森防的部署信息" tabindex="-1">智慧森防的部署信息 <a class="header-anchor" href="#智慧森防的部署信息" aria-hidden="true">#</a></h1><h2 id="开发环境服务器信息" tabindex="-1">开发环境服务器信息 <a class="header-anchor" href="#开发环境服务器信息" aria-hidden="true">#</a></h2><ul><li>服务器地址：192.168.0.18</li><li>用户名/密码：root/root</li></ul><h2 id="开发环境docker信息" tabindex="-1">开发环境docker信息 <a class="header-anchor" href="#开发环境docker信息" aria-hidden="true">#</a></h2><p>此项目使用docker进行部署。</p><ul><li>镜像名称：production/frontend/ffp-web-frontend</li><li>容器名称：ffp-web-frontend</li><li>挂载卷信息可参考创建容器时执行的命令(详查项目根目录下的Jenkinsfile文件)：</li></ul><div class="language-shell"><pre><code><span class="token function">docker</span> run -itd -p <span class="token variable">${_project_port}</span>:80 <span class="token punctuation">\</span>
--name <span class="token variable">${_container_name}</span> <span class="token punctuation">\</span>
--restart always <span class="token punctuation">\</span>
-v /home/docker/<span class="token variable">${_project_name}</span>/nginx/webgis:/usr/share/nginx/html/webgis <span class="token punctuation">\</span>
-v /home/docker/<span class="token variable">${_project_name}</span>/nginx/conf:/etc/nginx/conf.d <span class="token punctuation">\</span>
-v /home/docker/<span class="token variable">${_project_name}</span>/nginx/log:/var/log/nginx <span class="token punctuation">\</span>
<span class="token variable">${_image_tag_prefix}</span><span class="token variable">${_container_name}</span>
</code></pre></div><h2 id="nginx配置信息" tabindex="-1">nginx配置信息 <a class="header-anchor" href="#nginx配置信息" aria-hidden="true">#</a></h2><p>nginx配置文件的位置：/home/docker/forest-fire-prevention/nginx/conf/default.conf gis需要的资源部署位置：/home/docker/forest-fire-prevention/nginx/webgis/ nginx配置文件的内容为(有的配置项可能暂时不在用)：</p><div class="language-text"><pre><code>server {
    listen       80;
    listen  [::]:80;
    server_name  localhost;

    #charset koi8-r;
    #access_log  /var/log/nginx/host.access.log  main;
    absolute_redirect off;

    location / {
        root   /usr/share/nginx/html;
        try_files $uri $uri/ /index.html;
        index  index.html index.htm;
    }
    location /resource/ { # gis模块需要的资源
        alias /usr/share/nginx/html/webgis/;
    }

    location /api/device/ { # 设备上下线模块的接口
        proxy_pass http://192.168.0.15:18082/device/;
    }

    location /api/kunming/ { # 调用昆明项目中的昆明火情接口
        proxy_pass http://39.129.3.99:8001/;
    }

    location /UpLoadFiles/ { # 昆明火情图片
        proxy_pass http://39.129.3.99:8001;
    }

    location /api/api/ { # 昆明气象信息查询的接口
        proxy_pass http://39.129.3.99:8006/api/;
    }

    location /wms/ { // gis需要获取的资源路径
        proxy_pass http://39.129.3.99:8010;
    }

    location /api/v1/ {  # 视频监控平台（LiveGBS）对应的接口
        proxy_pass http://39.129.3.99:8011;
    }
    location /sms/ { # 视频监控平台对应的接口
        proxy_pass http://39.129.3.99:8011;
    }
    
    location /api/ys/ { # 大数据统计模块对应的接口
        proxy_pass http://192.168.0.40:8000/ys/;
    }

    location @router {
	    rewrite ^.*$ /index.html last;
    }


    #error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}
</code></pre></div><h2 id="黑龙江环境部署教程" tabindex="-1">黑龙江环境部署教程 <a class="header-anchor" href="#黑龙江环境部署教程" aria-hidden="true">#</a></h2><p>因为12环境的Jenkins无法访问黑龙江环境，所以需要在本地环境手动构建部署。使用Intellij Idea进行如下操作：</p><blockquote><p>切记要先打开vpn~</p></blockquote><ol><li><p>先安装IDEA的插件：Docker,再找到Services视图</p><p><img src="/Titans-UI/assets/image-20220414102019042.cf2738ac.png" alt="image-20220414102019042"></p></li><li><p>Docker Connection</p><p><img src="/Titans-UI/assets/image-20220414102224464.5957ad48.png" alt="image-20220414102224464"></p></li><li><p>输入配置，如下图</p><p><img src="/Titans-UI/assets/image-20220414102606898.738f1bcd.png" alt="image-20220414102606898"></p></li><li><p>先运行build命令打包前端代码到dist目录。然后可以新建个目录（比如docker），把dist目录中的打包后的文件和根目录的Dockerfile文件拷贝到docker目录。（Dockerfile文件拷贝到docker文件夹后，记得改下内容，参考下面图片为修改内容后的！） <img src="/Titans-UI/assets/image-20220414175543051.ea8f85b3.png" alt="image-20220414175543051"></p><p><img src="/Titans-UI/assets/image-20220414180826979.8c5c529f.png" alt="image-20220414180826979"></p></li><li><p>在IDEA中的run菜单中找到 <strong>Edit Configurations</strong>,按如下图配置：</p><p><img src="/Titans-UI/assets/image-20220414175821938.d863c034.png" alt="image-20220414175821938"></p><p><img src="/Titans-UI/assets/image-20220414180130388.544ac88a.png" alt="image-20220414180130388"></p></li><li><p>配置完成后，运行：</p><p><img src="/Titans-UI/assets/image-20220414180320727.82ef3bc0.png" alt="image-20220414180320727"></p></li><li><p>查看Services面板：</p><p><img src="/Titans-UI/assets/image-20220414180556877.6d8ce854.png" alt="image-20220414180556877"></p></li></ol><blockquote><p>镜像名称：production/frontend/ffp-web-frontend<br> 容器名称：ffp-web-frontend<br> nginx配置路径：/home/docker/forest-fire-prevention/nginx/conf<br> 服务访问地址：<a href="http://192.168.230.26:12345" target="_blank" rel="noopener noreferrer">http://192.168.230.26:12345</a></p><p>不要忘记打开vpn</p></blockquote></div></div><footer class="page-footer" data-v-cb2da010 data-v-47d413d1><div class="edit" data-v-47d413d1><div class="edit-link" data-v-47d413d1 data-v-23afd189><!----></div></div><div class="updated" data-v-47d413d1><!----></div></footer><div class="next-and-prev-link" data-v-cb2da010 data-v-4c4264aa><div class="container" data-v-4c4264aa><div class="prev" data-v-4c4264aa><a class="link" href="/Titans-UI/handover/project-structure" data-v-4c4264aa><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-4c4264aa><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-4c4264aa>项目结构</span></a></div><div class="next" data-v-4c4264aa><a class="link" href="/Titans-UI/handover/branch" data-v-4c4264aa><span class="text" data-v-4c4264aa>分支管理规范</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-4c4264aa><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"component_button.md\":\"b8855800\",\"component_checkbox.md\":\"b55398be\",\"component_date-picker.md\":\"de987432\",\"component_dialog.md\":\"0860092a\",\"component_digital-transition.md\":\"9320f9b0\",\"component_icon.md\":\"3a43da8d\",\"component_input.md\":\"f615e00f\",\"component_marquee.md\":\"7b708dad\",\"component_player-controls.md\":\"3827a0a6\",\"component_radio.md\":\"184270cb\",\"component_screenfull.md\":\"3c7bde1f\",\"component_select.md\":\"772546a1\",\"component_switch.md\":\"ce30f1e8\",\"component_time-picker.md\":\"38f998f1\",\"component_tip.md\":\"89a85709\",\"component_widget.md\":\"a2de07be\",\"guide_changelog.md\":\"8e7b4f26\",\"guide_installation.md\":\"df95675f\",\"guide_introduction.md\":\"f928a851\",\"guide_quickstart.md\":\"9e2b043e\",\"handover_branch.md\":\"aba6f2aa\",\"handover_deploy.md\":\"79b69ae7\",\"handover_devops.md\":\"b0f04b47\",\"handover_ffp.md\":\"3bc02fd3\",\"handover_git-commit.md\":\"a678cccc\",\"handover_gitlab.md\":\"028da109\",\"handover_project-structure.md\":\"b9cc8089\",\"index.md\":\"e0d57045\"}")</script>
    <script type="module" async src="/Titans-UI/assets/app.5aaa6b63.js"></script>
    
  </body>
</html>